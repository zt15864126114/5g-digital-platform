import{_ as ie,r as g,k as F,l as M,o as me,c as j,b as l,w as n,d as i,e as V,F as U,g as q,m as P,h as c,f as b,t as T,n as pe,i as ce,E as ve,p as R,q as ge,s as fe,v as ye,x as be,y as _e}from"./index-D2fepQcI.js";const he={class:"customer-container"},Ve={class:"card-header"},we={class:"header-left"},De={class:"header-right"},je={class:"amount"},Ce={class:"pagination-container"},ke={class:"dialog-footer"},xe={__name:"CustomerManagement",setup(ze){const L=[{value:"战略合作",label:"战略合作"},{value:"钻石",label:"钻石"},{value:"VIP",label:"VIP"},{value:"普通",label:"普通"}],Y=[{value:"通信设备",label:"通信设备"},{value:"IT服务",label:"IT服务"},{value:"软件开发",label:"软件开发"},{value:"云服务",label:"云服务"},{value:"数字科技",label:"数字科技"},{value:"智能制造",label:"智能制造"},{value:"医疗科技",label:"医疗科技"},{value:"物流运输",label:"物流运输"},{value:"教育科技",label:"教育科技"},{value:"新能源",label:"新能源"},{value:"半导体",label:"半导体"},{value:"工业自动化",label:"工业自动化"},{value:"海洋科技",label:"海洋科技"},{value:"智能家居",label:"智能家居"},{value:"工程机械",label:"工程机械"}],f=g([{id:1,name:"张志远",company:"深圳市未来通信技术有限公司",phone:"13812345678",level:"战略合作",joinDate:"2023-01-15",consumption:258e4,industry:"通信设备",address:"深圳市南山区科技园南区T3栋12层",email:"zhangzy@future-tech.com"},{id:2,name:"李明",company:"上海智慧网络科技股份有限公司",phone:"13987654321",level:"钻石",joinDate:"2023-02-22",consumption:168e4,industry:"IT服务",address:"上海市浦东新区张江高科技园区科苑路88号",email:"liming@smart-net.com"},{id:3,name:"王海峰",company:"北京创新数字科技有限公司",phone:"13567891234",level:"VIP",joinDate:"2023-03-10",consumption:98e4,industry:"软件开发",address:"北京市海淀区中关村软件园二期西扩工程A座",email:"wanghf@innov-tech.cn"},{id:4,name:"赵婷",company:"广州市云计算服务有限公司",phone:"13789012345",level:"钻石",joinDate:"2023-04-05",consumption:145e4,industry:"云服务",address:"广州市天河区珠江新城华夏路10号",email:"zhaoting@cloud-service.com"},{id:5,name:"陈建国",company:"杭州数字科技集团",phone:"13678901234",level:"战略合作",joinDate:"2023-05-18",consumption:32e5,industry:"数字科技",address:"杭州市滨江区网商路699号",email:"chenjg@digital-group.com"},{id:6,name:"周鑫",company:"武汉智能制造技术有限公司",phone:"13901234567",level:"VIP",joinDate:"2023-06-20",consumption:86e4,industry:"智能制造",address:"武汉市东湖新技术开发区光谷大道77号",email:"zhouxin@smart-mfg.com"},{id:7,name:"吴芳",company:"成都医疗科技股份有限公司",phone:"13512345678",level:"普通",joinDate:"2023-07-08",consumption:42e4,industry:"医疗科技",address:"成都市高新区天府大道中段666号",email:"wufang@med-tech.com"},{id:8,name:"刘德华",company:"天津港口物流有限公司",phone:"13698765432",level:"VIP",joinDate:"2023-08-12",consumption:92e4,industry:"物流运输",address:"天津市滨海新区港口大道168号",email:"liudh@port-logistics.com"},{id:9,name:"郑晓明",company:"南京智慧教育科技有限公司",phone:"13812349876",level:"普通",joinDate:"2023-09-25",consumption:38e4,industry:"教育科技",address:"南京市江宁区文教路123号",email:"zhengxm@edu-tech.com"},{id:10,name:"黄志伟",company:"重庆新能源技术有限公司",phone:"13923456789",level:"VIP",joinDate:"2023-10-15",consumption:78e4,industry:"新能源",address:"重庆市渝北区创新路58号",email:"huangzw@new-energy.com"},{id:11,name:"杨光",company:"西安半导体科技有限公司",phone:"13845678901",level:"战略合作",joinDate:"2023-11-08",consumption:28e5,industry:"半导体",address:"西安市高新区科技路366号",email:"yangguang@semi-tech.com"},{id:12,name:"马云飞",company:"苏州工业自动化设备有限公司",phone:"13756789012",level:"钻石",joinDate:"2023-12-01",consumption:168e4,industry:"工业自动化",address:"苏州市工业园区自动化大道88号",email:"mayf@auto-equip.com"},{id:13,name:"林晓婷",company:"厦门海洋科技研究院",phone:"13634567890",level:"普通",joinDate:"2024-01-05",consumption:32e4,industry:"海洋科技",address:"厦门市海沧区海洋大道199号",email:"linxt@ocean-tech.org"},{id:14,name:"朱建平",company:"青岛智能家居科技有限公司",phone:"13723456789",level:"VIP",joinDate:"2024-01-18",consumption:89e4,industry:"智能家居",address:"青岛市崂山区科技园路789号",email:"zhujp@smart-home.com"},{id:15,name:"沈丽",company:"长沙工程机械股份有限公司",phone:"13889012345",level:"战略合作",joinDate:"2024-02-01",consumption:42e5,industry:"工程机械",address:"长沙市星沙工业园机械大道1号",email:"shenli@engineering.com"},{id:16,name:"韩雪",company:"大连海洋渔业集团",phone:"13567890123",level:"VIP",joinDate:"2024-02-15",consumption:96e4,industry:"海洋科技",address:"大连市沙河口区星海广场A座",email:"hanxue@ocean-group.com"},{id:17,name:"方明",company:"济南智能装备制造有限公司",phone:"13789012345",level:"钻石",joinDate:"2024-02-28",consumption:189e4,industry:"智能制造",address:"济南市高新区装备制造园区23号",email:"fangming@smart-equip.com"},{id:18,name:"张玉",company:"合肥新型显示技术有限公司",phone:"13678901234",level:"战略合作",joinDate:"2024-03-05",consumption:256e4,industry:"半导体",address:"合肥市新站区显示产业园B区",email:"zhangyu@display-tech.com"},{id:19,name:"李强",company:"福州智慧城市科技有限公司",phone:"13890123456",level:"VIP",joinDate:"2024-03-12",consumption:72e4,industry:"数字科技",address:"福州市鼓楼区软件大道89号",email:"liqiang@smart-city.com"},{id:20,name:"王萍",company:"郑州绿色能源科技有限公司",phone:"13901234567",level:"普通",joinDate:"2024-03-20",consumption:45e4,industry:"新能源",address:"郑州市金水区科技园路100号",email:"wangping@green-energy.com"}]),s=F({name:"",level:"",industry:"",dateRange:[]}),t=F({id:"",name:"",company:"",phone:"",level:"",industry:"",joinDate:"",consumption:0,email:"",address:""}),A={name:[{required:!0,message:"请输入客户名称",trigger:"blur"}],company:[{required:!0,message:"请输入公司名称",trigger:"blur"}],phone:[{required:!0,message:"请输入联系电话",trigger:"blur"},{pattern:/^1[3-9]\d{9}$/,message:"请输入正确的手机号码",trigger:"blur"}],level:[{required:!0,message:"请选择客户等级",trigger:"change"}],industry:[{required:!0,message:"请选择所属行业",trigger:"change"}],joinDate:[{required:!0,message:"请选择加入日期",trigger:"change"}],consumption:[{required:!0,message:"请输入消费金额",trigger:"blur"}],email:[{required:!0,message:"请输入电子邮箱",trigger:"blur"},{type:"email",message:"请输入正确的邮箱地址",trigger:"blur"}],address:[{required:!0,message:"请输入公司地址",trigger:"blur"}]},S=g(!1),_=g(!1),C=g("add"),k=g(null),y=g(1),w=g(10),D=g({prop:"",order:""}),x=M(()=>{let o=[...f.value];if(s.name){const e=s.name.toLowerCase();o=o.filter(u=>u.name.toLowerCase().includes(e)||u.company.toLowerCase().includes(e))}if(s.level&&(o=o.filter(e=>e.level===s.level)),s.industry&&(o=o.filter(e=>e.industry===s.industry)),s.dateRange&&s.dateRange.length===2){const[e,u]=s.dateRange;o=o.filter(d=>d.joinDate>=e&&d.joinDate<=u)}if(D.value.prop&&D.value.order){const{prop:e,order:u}=D.value;o.sort((d,m)=>u==="ascending"?d[e]>m[e]?1:-1:d[e]<m[e]?1:-1)}return o}),N=M(()=>{const o=(y.value-1)*w.value,e=o+w.value;return x.value.slice(o,e)}),G=M(()=>x.value.length),H=o=>({战略合作:"success",钻石:"danger",VIP:"warning",普通:"info"})[o]||"info",J=()=>{y.value=1},K=()=>{s.name="",s.level="",s.industry="",s.dateRange=[],y.value=1,D.value={prop:"",order:""}},Q=({prop:o,order:e})=>{D.value={prop:o,order:e}},W=()=>{var o;C.value="add",_.value=!0,(o=k.value)==null||o.resetFields(),Object.assign(t,{id:"",name:"",company:"",phone:"",level:"",industry:"",joinDate:"",consumption:0,email:"",address:""})},X=o=>{C.value="edit",_.value=!0,Object.assign(t,o)},Z=o=>{ve.confirm(`确定要删除客户 ${o.name} 吗？`,"警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{const e=f.value.findIndex(u=>u.id===o.id);e>-1&&(f.value.splice(e,1),R.success("删除成功"))}).catch(()=>{R.info("已取消删除")})},ee=async()=>{k.value&&await k.value.validate(o=>{if(o){if(C.value==="add"){const e={...t,id:Math.max(...f.value.map(u=>u.id))+1};f.value.push(e),R.success("添加成功")}else{const e=f.value.findIndex(u=>u.id===t.id);e>-1&&(f.value[e]={...t},R.success("更新成功"))}_.value=!1}})},le=()=>{const o=x.value.map(r=>({ID:r.id,客户名称:r.name,公司名称:r.company,所属行业:r.industry,客户等级:r.level,消费金额:r.consumption,联系电话:r.phone,电子邮箱:r.email,公司地址:r.address,加入日期:r.joinDate})),e=Object.keys(o[0]),u=[e.join(","),...o.map(r=>e.map(z=>`"${r[z]}"`).join(","))].join(`
`),d=new Blob([u],{type:"text/csv;charset=utf-8;"}),m=document.createElement("a");m.href=URL.createObjectURL(d),m.download=`客户数据_${new Date().toLocaleDateString()}.csv`,m.click()},ae=o=>{w.value=o,y.value=1},ne=o=>{y.value=o};return me(()=>{S.value=!0,setTimeout(()=>{S.value=!1},500)}),(o,e)=>{const u=i("el-input"),d=i("el-form-item"),m=i("el-option"),r=i("el-select"),z=i("el-date-picker"),I=i("el-icon"),v=i("el-button"),$=i("el-form"),E=i("el-card"),O=i("el-tag"),p=i("el-table-column"),oe=i("el-table"),te=i("el-pagination"),h=i("el-col"),B=i("el-row"),se=i("el-input-number"),de=i("el-dialog"),ue=ge("loading");return V(),j("div",he,[l(E,{class:"search-card"},{default:n(()=>[l($,{inline:!0,model:s,class:"search-form"},{default:n(()=>[l(d,{label:"客户名称"},{default:n(()=>[l(u,{modelValue:s.name,"onUpdate:modelValue":e[0]||(e[0]=a=>s.name=a),placeholder:"请输入客户名称/公司名称",clearable:""},null,8,["modelValue"])]),_:1}),l(d,{label:"客户等级"},{default:n(()=>[l(r,{modelValue:s.level,"onUpdate:modelValue":e[1]||(e[1]=a=>s.level=a),placeholder:"请选择客户等级",clearable:""},{default:n(()=>[(V(),j(U,null,q(L,a=>l(m,{key:a.value,label:a.label,value:a.value},null,8,["label","value"])),64))]),_:1},8,["modelValue"])]),_:1}),l(d,{label:"所属行业"},{default:n(()=>[l(r,{modelValue:s.industry,"onUpdate:modelValue":e[2]||(e[2]=a=>s.industry=a),placeholder:"请选择行业",clearable:""},{default:n(()=>[(V(),j(U,null,q(Y,a=>l(m,{key:a.value,label:a.label,value:a.value},null,8,["label","value"])),64))]),_:1},8,["modelValue"])]),_:1}),l(d,{label:"加入日期"},{default:n(()=>[l(z,{modelValue:s.dateRange,"onUpdate:modelValue":e[3]||(e[3]=a=>s.dateRange=a),type:"daterange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期","value-format":"YYYY-MM-DD"},null,8,["modelValue"])]),_:1}),l(d,null,{default:n(()=>[l(v,{type:"primary",onClick:J},{default:n(()=>[l(I,null,{default:n(()=>[l(P(fe))]),_:1}),e[17]||(e[17]=c("搜索 "))]),_:1}),l(v,{onClick:K},{default:n(()=>[l(I,null,{default:n(()=>[l(P(ye))]),_:1}),e[18]||(e[18]=c("重置 "))]),_:1})]),_:1})]),_:1},8,["model"])]),_:1}),l(E,{class:"list-card"},{header:n(()=>[b("div",Ve,[b("div",we,[e[19]||(e[19]=b("span",{class:"title"},"客户列表",-1)),l(O,{type:"info",class:"count-tag"},{default:n(()=>[c("共 "+T(G.value)+" 条",1)]),_:1})]),b("div",De,[l(v,{type:"success",onClick:le},{default:n(()=>[l(I,null,{default:n(()=>[l(P(be))]),_:1}),e[20]||(e[20]=c("导出数据 "))]),_:1}),l(v,{type:"primary",onClick:W},{default:n(()=>[l(I,null,{default:n(()=>[l(P(_e))]),_:1}),e[21]||(e[21]=c("添加客户 "))]),_:1})])])]),default:n(()=>[pe((V(),ce(oe,{data:N.value,style:{width:"100%"},border:"",stripe:"",onSortChange:Q},{default:n(()=>[l(p,{prop:"id",label:"ID",width:"80",sortable:"custom"}),l(p,{prop:"name",label:"客户名称","min-width":"100"}),l(p,{prop:"company",label:"公司名称","min-width":"200","show-overflow-tooltip":""}),l(p,{prop:"industry",label:"所属行业","min-width":"120"}),l(p,{prop:"level",label:"客户等级",width:"100"},{default:n(({row:a})=>[l(O,{type:H(a.level)},{default:n(()=>[c(T(a.level),1)]),_:2},1032,["type"])]),_:1}),l(p,{prop:"consumption",label:"消费金额",width:"150",sortable:"custom"},{default:n(({row:a})=>[b("span",je,"¥"+T(a.consumption.toLocaleString()),1)]),_:1}),l(p,{prop:"phone",label:"联系电话",width:"120"}),l(p,{prop:"email",label:"电子邮箱","min-width":"180","show-overflow-tooltip":""}),l(p,{prop:"address",label:"公司地址","min-width":"200","show-overflow-tooltip":""}),l(p,{prop:"joinDate",label:"加入日期",width:"120",sortable:"custom"}),l(p,{label:"操作",width:"180",fixed:"right"},{default:n(a=>[l(v,{size:"small",onClick:re=>X(a.row)},{default:n(()=>e[22]||(e[22]=[c("编辑")])),_:2},1032,["onClick"]),l(v,{size:"small",type:"danger",onClick:re=>Z(a.row)},{default:n(()=>e[23]||(e[23]=[c("删除")])),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"])),[[ue,S.value]]),b("div",Ce,[l(te,{"current-page":y.value,"onUpdate:currentPage":e[4]||(e[4]=a=>y.value=a),"page-size":w.value,"onUpdate:pageSize":e[5]||(e[5]=a=>w.value=a),total:x.value.length,"page-sizes":[10,20,30,50],layout:"total, sizes, prev, pager, next, jumper",onSizeChange:ae,onCurrentChange:ne},null,8,["current-page","page-size","total"])])]),_:1}),l(de,{title:C.value==="add"?"添加客户":"编辑客户",modelValue:_.value,"onUpdate:modelValue":e[16]||(e[16]=a=>_.value=a),width:"650px"},{footer:n(()=>[b("span",ke,[l(v,{onClick:e[15]||(e[15]=a=>_.value=!1)},{default:n(()=>e[24]||(e[24]=[c("取消")])),_:1}),l(v,{type:"primary",onClick:ee},{default:n(()=>e[25]||(e[25]=[c("确定")])),_:1})])]),default:n(()=>[l($,{ref_key:"formRef",ref:k,model:t,rules:A,"label-width":"100px"},{default:n(()=>[l(B,{gutter:20},{default:n(()=>[l(h,{span:12},{default:n(()=>[l(d,{label:"客户名称",prop:"name"},{default:n(()=>[l(u,{modelValue:t.name,"onUpdate:modelValue":e[6]||(e[6]=a=>t.name=a),placeholder:"请输入客户名称"},null,8,["modelValue"])]),_:1})]),_:1}),l(h,{span:12},{default:n(()=>[l(d,{label:"联系电话",prop:"phone"},{default:n(()=>[l(u,{modelValue:t.phone,"onUpdate:modelValue":e[7]||(e[7]=a=>t.phone=a),placeholder:"请输入联系电话"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),l(B,{gutter:20},{default:n(()=>[l(h,{span:12},{default:n(()=>[l(d,{label:"客户等级",prop:"level"},{default:n(()=>[l(r,{modelValue:t.level,"onUpdate:modelValue":e[8]||(e[8]=a=>t.level=a),placeholder:"请选择客户等级",style:{width:"100%"}},{default:n(()=>[(V(),j(U,null,q(L,a=>l(m,{key:a.value,label:a.label,value:a.value},null,8,["label","value"])),64))]),_:1},8,["modelValue"])]),_:1})]),_:1}),l(h,{span:12},{default:n(()=>[l(d,{label:"所属行业",prop:"industry"},{default:n(()=>[l(r,{modelValue:t.industry,"onUpdate:modelValue":e[9]||(e[9]=a=>t.industry=a),placeholder:"请选择行业",style:{width:"100%"}},{default:n(()=>[(V(),j(U,null,q(Y,a=>l(m,{key:a.value,label:a.label,value:a.value},null,8,["label","value"])),64))]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1}),l(d,{label:"公司名称",prop:"company"},{default:n(()=>[l(u,{modelValue:t.company,"onUpdate:modelValue":e[10]||(e[10]=a=>t.company=a),placeholder:"请输入公司名称"},null,8,["modelValue"])]),_:1}),l(d,{label:"电子邮箱",prop:"email"},{default:n(()=>[l(u,{modelValue:t.email,"onUpdate:modelValue":e[11]||(e[11]=a=>t.email=a),placeholder:"请输入电子邮箱"},null,8,["modelValue"])]),_:1}),l(d,{label:"公司地址",prop:"address"},{default:n(()=>[l(u,{modelValue:t.address,"onUpdate:modelValue":e[12]||(e[12]=a=>t.address=a),placeholder:"请输入公司地址"},null,8,["modelValue"])]),_:1}),l(B,{gutter:20},{default:n(()=>[l(h,{span:12},{default:n(()=>[l(d,{label:"加入日期",prop:"joinDate"},{default:n(()=>[l(z,{modelValue:t.joinDate,"onUpdate:modelValue":e[13]||(e[13]=a=>t.joinDate=a),type:"date",placeholder:"请选择加入日期","value-format":"YYYY-MM-DD",style:{width:"100%"}},null,8,["modelValue"])]),_:1})]),_:1}),l(h,{span:12},{default:n(()=>[l(d,{label:"消费金额",prop:"consumption"},{default:n(()=>[l(se,{modelValue:t.consumption,"onUpdate:modelValue":e[14]||(e[14]=a=>t.consumption=a),min:0,step:1e4,precision:0,style:{width:"100%"}},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1},8,["model"])]),_:1},8,["title","modelValue"])])}}},Ue=ie(xe,[["__scopeId","data-v-fbc651a2"]]);export{Ue as default};
