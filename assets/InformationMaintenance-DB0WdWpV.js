import{_ as xe,r as p,m as J,c as g,b as l,d as a,e as s,f as c,F as I,h as U,g as n,i as r,t as i,G as ke,n as le,p as ze,j as E,C as L,E as De,q as A,s as Te,k as Se,B as Ie,v as Ue,z as Ae}from"./index-C-SHUFs9.js";const Fe={class:"maintenance-container"},$e={class:"stat-icon"},Ke={class:"stat-info"},Re={class:"stat-title"},qe={class:"card-header"},Ee={class:"header-left"},Le={class:"header-right"},Pe={class:"pagination-container"},He={class:"dialog-footer"},Oe={key:0,class:"detail-content"},Ge={class:"meta-info"},Ne={class:"content-box"},je={key:0,class:"attachments-section"},Je={class:"attachment-list"},Qe={key:1,class:"approval-section"},We={class:"dialog-footer"},Xe={__name:"InformationMaintenance",setup(Ye){const ae=[{title:"总记录数",value:256,icon:"Document",color:"#409EFF"},{title:"本月更新",value:45,icon:"Refresh",color:"#67C23A"},{title:"待审核",value:8,icon:"Timer",color:"#E6A23C"},{title:"已驳回",value:3,icon:"CircleClose",color:"#F56C6C"}],oe=p(!1),B=p(!1),F=p("add"),P=p(!1),k=p(!1),d=p(null),$=p(""),_=p(1),z=p(10),H=p(null),O=p(null),ne=[{label:"产品信息",value:"产品信息"},{label:"技术文档",value:"技术文档"},{label:"运维信息",value:"运维信息"},{label:"市场动态",value:"市场动态"}],se=[{label:"产品文档",value:"产品文档"},{label:"开发文档",value:"开发文档"},{label:"系统公告",value:"系统公告"},{label:"操作手册",value:"操作手册"}],b=p([{id:1,date:"2024-10-20",type:"产品信息",title:"5G网络切片产品更新说明",operator:"张工",category:"产品文档",status:"已审核",content:`本次更新包含以下内容：
1. 优化网络切片配置流程
2. 新增自动化部署功能
3. 提升性能监控准确度`,attachments:[{name:"产品说明书v2.1.pdf",size:"2.5MB"}]},{id:2,date:"2024-10-19",type:"技术文档",title:"API接口文档更新",operator:"李工",category:"开发文档",status:"待审核",content:`更新了以下API接口文档：
1. 用户认证接口
2. 数据统计接口
3. 配置管理接口`,attachments:[{name:"API文档v1.2.md",size:"856KB"},{name:"接口示例.json",size:"128KB"}]},...(o=>{const e=["张工","李工","王工","赵工","陈工","刘工","周工","吴工","郑工","孙工","黄工","朱工","钱工","林工","徐工","胡工","马工","曾工","梁工","杨工"],u=["产品信息","技术文档","操作手册","培训资料","方案设计","测试报告","运维手册","故障处理","版本说明","集成指南"],V=["产品文档","开发文档","运维文档","培训文档","技术方案","测试文档","用户手册","规范标准","研发文档","集成文档"],K=["5G网络切片产品更新说明","API接口文档更新","网络管理系统操作指南","边缘计算平台部署手册","5G专网解决方案设计","网络性能测试报告","故障诊断与处理手册","安全防护白皮书","系统架构设计说明","运维流程规范","智慧园区解决方案","物联网平台使用指南","网络优化分析报告","业务开通流程手册","系统升级指导书","性能调优方案","安全加固指南","容器化部署文档","监控平台使用手册","数据迁移方案","高可用性设计方案","负载均衡配置指南","网络拓扑设计","测试用例集","DevOps实施手册","微服务架构说明","数据备份方案","应急响应预案","版本发布说明","集成测试报告"],R=[`本次更新包含以下内容：
1. 优化网络切片配置流程
2. 新增自动化部署功能
3. 提升性能监控准确度`,`更新了以下API接口文档：
1. 用户认证接口
2. 数据统计接口
3. 配置管理接口`,`本文档主要包含：
1. 系统架构说明
2. 部署步骤详解
3. 常见问题解答`,`更新要点：
1. 新增功能说明
2. 优化操作流程
3. 修复已知问题`,`主要内容：
1. 方案概述
2. 技术架构
3. 实施步骤
4. 注意事项`,`测试结果：
1. 性能测试数据
2. 压力测试报告
3. 优化建议`,`文档更新：
1. 完善故障处理流程
2. 新增常见问题解答
3. 更新故障案例`,`重要说明：
1. 安全策略更新
2. 访问控制规则
3. 日志审计要求`,`设计要点：
1. 系统架构图
2. 模块说明
3. 接口定义
4. 数据流程`,`规范要求：
1. 运维流程
2. 质量标准
3. 验收规范`],M=[{ext:"pdf",size:["2.1MB","3.5MB","4.2MB","1.8MB","5.3MB"]},{ext:"md",size:["856KB","920KB","750KB","1.2MB","680KB"]},{ext:"docx",size:["1.5MB","2.2MB","3.1MB","1.9MB","2.8MB"]},{ext:"pptx",size:["3.8MB","4.5MB","2.9MB","5.1MB","3.3MB"]},{ext:"xlsx",size:["1.1MB","1.8MB","2.3MB","950KB","1.6MB"]}];return Array.from({length:o},(D,v)=>{const h=u[Math.floor(Math.random()*u.length)],q=K[Math.floor(Math.random()*K.length)],G=Math.floor(Math.random()*3)+1,T=[];for(let f=0;f<G;f++){const S=M[Math.floor(Math.random()*M.length)];T.push({name:`${q.substring(0,10)}_v${Math.floor(Math.random()*5)+1}.${S.ext}`,size:S.size[Math.floor(Math.random()*S.size.length)]})}const x=new Date;return x.setDate(x.getDate()-Math.floor(Math.random()*30)),{id:v+3,date:x.toISOString().split("T")[0],type:h,title:q,operator:e[Math.floor(Math.random()*e.length)],category:V[Math.floor(Math.random()*V.length)],status:Math.random()>.3?"已审核":"待审核",content:R[Math.floor(Math.random()*R.length)],attachments:T}})})(254)]),m=p({type:"",title:"",category:"",content:"",attachments:[]}),re={type:[{required:!0,message:"请选择信息类型",trigger:"change"}],title:[{required:!0,message:"请输入标题",trigger:"blur"}],category:[{required:!0,message:"请选择分类",trigger:"change"}],content:[{required:!0,message:"请输入内容",trigger:"blur"}]},y=p({result:"通过",comment:""}),ue={result:[{required:!0,message:"请选择审核结果",trigger:"change"}],comment:[{required:!0,message:"请输入审核意见",trigger:"blur"}]},Q=J(()=>{let o=b.value;if($.value){const e=$.value.toLowerCase();o=o.filter(u=>u.title.toLowerCase().includes(e)||u.operator.toLowerCase().includes(e)||u.content.toLowerCase().includes(e))}return o}),W=J(()=>{const o=(_.value-1)*z.value,e=o+z.value;return Q.value.slice(o,e)}),X=J(()=>Q.value.length),Y=()=>{_.value=1},ie=o=>{z.value=o,_.value=1},de=o=>{_.value=o},pe=()=>{F.value="add",m.value={type:"",title:"",category:"",content:"",attachments:[]},B.value=!0},ce=o=>{F.value="edit",m.value={...o},B.value=!0},me=o=>{d.value=o,P.value=!0},ve=o=>{De.confirm("确认删除该记录吗？","警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{const e=b.value.findIndex(u=>u.id===o.id);e>-1&&(b.value.splice(e,1),W.value.length===0&&_.value>1&&_.value--,A.success("删除成功"))}).catch(()=>{})},fe=o=>{d.value=o,y.value={result:"通过",comment:""},k.value=!0},ge=(o,e)=>{console.log(o,e)},_e=o=>{A.success(`开始下载文件：${o.name}`)},ye=async()=>{H.value&&await H.value.validate(o=>{if(o){const e={id:b.value.length+1,date:new Date().toISOString().split("T")[0],operator:"当前用户",status:"待审核",...m.value};if(F.value==="add")b.value.unshift(e),_.value=1,A.success("添加成功");else{const u=b.value.findIndex(V=>V.id===e.id);u>-1&&(b.value[u]=e,A.success("更新成功"))}B.value=!1}})},he=async()=>{O.value&&await O.value.validate(o=>{if(o){const e=b.value.find(u=>u.id===d.value.id);e&&(e.status=y.value.result==="通过"?"已审核":"已驳回",e.approvalHistory=e.approvalHistory||[],e.approvalHistory.unshift({date:new Date().toLocaleString(),operator:"当前用户",result:y.value.result,comment:y.value.comment}),A.success("审核提交成功"),k.value=!1)}})},be=o=>({产品信息:"success",技术文档:"primary",运维信息:"warning",市场动态:"info"})[o]||"",Me=o=>({产品文档:"success",开发文档:"primary",系统公告:"warning",操作手册:"info"})[o]||"",Z=o=>({已审核:"success",待审核:"warning",已驳回:"danger"})[o]||"";return(o,e)=>{const u=s("el-icon"),V=s("el-card"),K=s("el-col"),R=s("el-row"),M=s("el-tag"),D=s("el-input"),v=s("el-button"),h=s("el-table-column"),q=s("el-table"),G=s("el-pagination"),T=s("el-option"),x=s("el-select"),f=s("el-form-item"),S=s("el-upload"),ee=s("el-form"),N=s("el-dialog"),we=s("el-timeline-item"),Ce=s("el-timeline"),te=s("el-radio"),Ve=s("el-radio-group"),Be=Te("loading");return c(),g("div",Fe,[l(R,{gutter:20},{default:a(()=>[(c(),g(I,null,U(ae,(t,w)=>l(K,{span:6,key:w},{default:a(()=>[l(V,{class:"stat-card","body-style":{padding:"20px"}},{default:a(()=>[n("div",$e,[l(u,{size:24,color:t.color},{default:a(()=>[(c(),E(Se(t.icon)))]),_:2},1032,["color"])]),n("div",Ke,[n("div",{class:"stat-value",style:Ie({color:t.color})},i(t.value),5),n("div",Re,i(t.title),1)])]),_:2},1024)]),_:2},1024)),64))]),_:1}),l(V,{class:"table-card"},{header:a(()=>[n("div",qe,[n("div",Ee,[e[14]||(e[14]=n("span",{class:"title"},"信息维护记录",-1)),l(M,{type:"info"},{default:a(()=>[r(i(X.value)+" 条记录",1)]),_:1})]),n("div",Le,[l(D,{modelValue:$.value,"onUpdate:modelValue":e[0]||(e[0]=t=>$.value=t),placeholder:"搜索关键词",style:{width:"200px","margin-right":"10px"},clearable:"",onClear:Y,onKeyup:ke(Y,["enter"])},{prefix:a(()=>[l(u,null,{default:a(()=>[l(le(Ue))]),_:1})]),_:1},8,["modelValue"]),l(v,{type:"primary",onClick:pe},{default:a(()=>[l(u,null,{default:a(()=>[l(le(Ae))]),_:1}),e[15]||(e[15]=r("新增记录 "))]),_:1})])])]),default:a(()=>[ze((c(),E(q,{data:W.value,style:{width:"100%"},border:"",stripe:""},{default:a(()=>[l(h,{prop:"date",label:"更新日期",width:"120",sortable:""}),l(h,{prop:"type",label:"信息类型",width:"120"},{default:a(({row:t})=>[l(M,{type:be(t.type)},{default:a(()=>[r(i(t.type),1)]),_:2},1032,["type"])]),_:1}),l(h,{prop:"title",label:"标题","min-width":"200","show-overflow-tooltip":""}),l(h,{prop:"operator",label:"操作人",width:"120"}),l(h,{prop:"category",label:"分类",width:"120"},{default:a(({row:t})=>[l(M,{type:Me(t.category),effect:"plain"},{default:a(()=>[r(i(t.category),1)]),_:2},1032,["type"])]),_:1}),l(h,{prop:"status",label:"状态",width:"100"},{default:a(({row:t})=>[l(M,{type:Z(t.status)},{default:a(()=>[r(i(t.status),1)]),_:2},1032,["type"])]),_:1}),l(h,{label:"操作",width:"250",fixed:"right"},{default:a(t=>[l(v,{size:"small",onClick:w=>ce(t.row)},{default:a(()=>e[16]||(e[16]=[r("编辑")])),_:2},1032,["onClick"]),l(v,{size:"small",type:"success",onClick:w=>me(t.row)},{default:a(()=>e[17]||(e[17]=[r("查看")])),_:2},1032,["onClick"]),t.row.status==="待审核"?(c(),E(v,{key:0,size:"small",type:"warning",onClick:w=>fe(t.row)},{default:a(()=>e[18]||(e[18]=[r("审核")])),_:2},1032,["onClick"])):L("",!0),l(v,{size:"small",type:"danger",onClick:w=>ve(t.row)},{default:a(()=>e[19]||(e[19]=[r("删除")])),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"])),[[Be,oe.value]]),n("div",Pe,[l(G,{"current-page":_.value,"onUpdate:currentPage":e[1]||(e[1]=t=>_.value=t),"page-size":z.value,"onUpdate:pageSize":e[2]||(e[2]=t=>z.value=t),total:X.value,"page-sizes":[10,20,30,50],layout:"total, sizes, prev, pager, next, jumper",onSizeChange:ie,onCurrentChange:de},null,8,["current-page","page-size","total"])])]),_:1}),l(N,{title:F.value==="add"?"新增记录":"编辑记录",modelValue:B.value,"onUpdate:modelValue":e[8]||(e[8]=t=>B.value=t),width:"650px"},{footer:a(()=>[n("span",He,[l(v,{onClick:e[7]||(e[7]=t=>B.value=!1)},{default:a(()=>e[22]||(e[22]=[r("取消")])),_:1}),l(v,{type:"primary",onClick:ye},{default:a(()=>e[23]||(e[23]=[r("确定")])),_:1})])]),default:a(()=>[l(ee,{ref_key:"formRef",ref:H,model:m.value,rules:re,"label-width":"100px"},{default:a(()=>[l(f,{label:"信息类型",prop:"type"},{default:a(()=>[l(x,{modelValue:m.value.type,"onUpdate:modelValue":e[3]||(e[3]=t=>m.value.type=t),placeholder:"请选择信息类型",style:{width:"100%"}},{default:a(()=>[(c(),g(I,null,U(ne,t=>l(T,{key:t.value,label:t.label,value:t.value},null,8,["label","value"])),64))]),_:1},8,["modelValue"])]),_:1}),l(f,{label:"标题",prop:"title"},{default:a(()=>[l(D,{modelValue:m.value.title,"onUpdate:modelValue":e[4]||(e[4]=t=>m.value.title=t),placeholder:"请输入标题"},null,8,["modelValue"])]),_:1}),l(f,{label:"分类",prop:"category"},{default:a(()=>[l(x,{modelValue:m.value.category,"onUpdate:modelValue":e[5]||(e[5]=t=>m.value.category=t),placeholder:"请选择分类",style:{width:"100%"}},{default:a(()=>[(c(),g(I,null,U(se,t=>l(T,{key:t.value,label:t.label,value:t.value},null,8,["label","value"])),64))]),_:1},8,["modelValue"])]),_:1}),l(f,{label:"内容",prop:"content"},{default:a(()=>[l(D,{modelValue:m.value.content,"onUpdate:modelValue":e[6]||(e[6]=t=>m.value.content=t),type:"textarea",rows:6,placeholder:"请输入内容"},null,8,["modelValue"])]),_:1}),l(f,{label:"附件"},{default:a(()=>[l(S,{action:"#","auto-upload":!1,"on-change":ge,"file-list":m.value.attachments},{tip:a(()=>e[21]||(e[21]=[n("div",{class:"el-upload__tip"}," 支持任意格式文件，单个文件不超过10MB ",-1)])),default:a(()=>[l(v,{type:"primary"},{default:a(()=>e[20]||(e[20]=[r("选择文件")])),_:1})]),_:1},8,["file-list"])]),_:1})]),_:1},8,["model"])]),_:1},8,["title","modelValue"]),l(N,{title:"信息详情",modelValue:P.value,"onUpdate:modelValue":e[9]||(e[9]=t=>P.value=t),width:"800px"},{default:a(()=>{var t,w;return[d.value?(c(),g("div",Oe,[n("h3",null,i(d.value.title),1),n("div",Ge,[n("span",null,"更新时间："+i(d.value.date),1),n("span",null,"操作人："+i(d.value.operator),1),n("span",null,[e[24]||(e[24]=r("状态： ")),l(M,{type:Z(d.value.status)},{default:a(()=>[r(i(d.value.status),1)]),_:1},8,["type"])])]),n("div",Ne,i(d.value.content),1),(t=d.value.attachments)!=null&&t.length?(c(),g("div",je,[e[26]||(e[26]=n("h3",null,"附件列表",-1)),n("div",Je,[(c(!0),g(I,null,U(d.value.attachments,(C,j)=>(c(),g("div",{key:j,class:"attachment-item"},[n("span",null,i(C.name),1),l(v,{type:"primary",link:"",onClick:et=>_e(C)},{default:a(()=>e[25]||(e[25]=[r("下载")])),_:2},1032,["onClick"])]))),128))])])):L("",!0),(w=d.value.approvalHistory)!=null&&w.length?(c(),g("div",Qe,[e[27]||(e[27]=n("h3",null,"审核历史",-1)),l(Ce,null,{default:a(()=>[(c(!0),g(I,null,U(d.value.approvalHistory,(C,j)=>(c(),E(we,{key:j,type:C.result==="通过"?"success":"danger",timestamp:C.date},{default:a(()=>[n("h4",null,i(C.operator),1),n("p",null,"审核结果："+i(C.result),1),n("p",null,"审核意见："+i(C.comment),1)]),_:2},1032,["type","timestamp"]))),128))]),_:1})])):L("",!0)])):L("",!0)]}),_:1},8,["modelValue"]),l(N,{title:"信息审核",modelValue:k.value,"onUpdate:modelValue":e[13]||(e[13]=t=>k.value=t),width:"500px"},{footer:a(()=>[n("span",We,[l(v,{onClick:e[12]||(e[12]=t=>k.value=!1)},{default:a(()=>e[30]||(e[30]=[r("取消")])),_:1}),l(v,{type:"primary",onClick:he},{default:a(()=>e[31]||(e[31]=[r("确定")])),_:1})])]),default:a(()=>[l(ee,{ref_key:"approvalFormRef",ref:O,model:y.value,rules:ue,"label-width":"100px"},{default:a(()=>[l(f,{label:"审核结果",prop:"result"},{default:a(()=>[l(Ve,{modelValue:y.value.result,"onUpdate:modelValue":e[10]||(e[10]=t=>y.value.result=t)},{default:a(()=>[l(te,{label:"通过"},{default:a(()=>e[28]||(e[28]=[r("通过")])),_:1}),l(te,{label:"驳回"},{default:a(()=>e[29]||(e[29]=[r("驳回")])),_:1})]),_:1},8,["modelValue"])]),_:1}),l(f,{label:"审核意见",prop:"comment"},{default:a(()=>[l(D,{modelValue:y.value.comment,"onUpdate:modelValue":e[11]||(e[11]=t=>y.value.comment=t),type:"textarea",rows:4,placeholder:"请输入审核意见"},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue"])])}}},lt=xe(Xe,[["__scopeId","data-v-0dec08ef"]]);export{lt as default};
